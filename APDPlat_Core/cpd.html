<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at Mar 18, 2013 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>APDPlat_Core - CPD Results</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20130318" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                <img class="poweredBy" alt="APDPlat" src="./images/logos/maven-feather.png" />
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
            
                <div class="xleft">
        <span id="publishDate">Last Published: 2013-03-18</span>
                  &nbsp;| <span id="projectVersion">Version: 2.2</span>
                      </div>
            <div class="xright">                    <a href="./" title="APDPlat_Core">APDPlat_Core</a>
              
            
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
            
                                          <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                                                    <li class="expanded">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                    <ul>
                      <li class="none">
                          <a  target="_blank" href="cobertura/index.html" title="Cobertura Test Coverage">Cobertura Test Coverage</a>
            </li>
                      <li class="none">
                          <a href="findbugs.html" title="FindBugs Report">FindBugs Report</a>
            </li>
                      <li class="none">
            <strong>CPD Report</strong>
          </li>
                      <li class="none">
                          <a href="pmd.html" title="PMD Report">PMD Report</a>
            </li>
                      <li class="none">
                          <a  target="_blank" href="apidocs/index.html" title="JavaDocs">JavaDocs</a>
            </li>
                      <li class="none">
                          <a  target="_blank" href="testapidocs/index.html" title="Test JavaDocs">Test JavaDocs</a>
            </li>
                      <li class="none">
                          <a href="checkstyle.html" title="Checkstyle">Checkstyle</a>
            </li>
                      <li class="none">
                          <a target="_blank"  href="xref/index.html" title="Source Xref">Source Xref</a>
            </li>
                      <li class="none">
                          <a  target="_blank" href="xref-test/index.html" title="Test Source Xref">Test Source Xref</a>
            </li>
                      <li class="none">
                          <a href="taglist.html" title="Tag List">Tag List</a>
            </li>
                      <li class="none">
                          <a href="testability.html" title="Testability Explorer">Testability Explorer</a>
            </li>
                      <li class="none">
                          <a href="dependency-updates-report.html" title="Dependency Updates Report">Dependency Updates Report</a>
            </li>
              </ul>
        </li>
          </ul>
                   
            
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.0.2.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com\apdplat\module\security\service\PrivilegeUtils.java</td><td>8</td></tr><tr class="a"><td>com\apdplat\platform\generator\JsGenerator.java</td><td>197</td></tr><tr class="b"><td colspan='2'><div><pre>    public static String process(String str){
        str=str.replace(&quot;A&quot;, &quot;-a&quot;);
        str=str.replace(&quot;B&quot;, &quot;-b&quot;);
        str=str.replace(&quot;C&quot;, &quot;-c&quot;);
        str=str.replace(&quot;D&quot;, &quot;-d&quot;);
        str=str.replace(&quot;E&quot;, &quot;-e&quot;);
        str=str.replace(&quot;F&quot;, &quot;-f&quot;);
        str=str.replace(&quot;G&quot;, &quot;-g&quot;);
        str=str.replace(&quot;H&quot;, &quot;-h&quot;);
        str=str.replace(&quot;I&quot;, &quot;-i&quot;);
        str=str.replace(&quot;J&quot;, &quot;-j&quot;);
        str=str.replace(&quot;K&quot;, &quot;-k&quot;);
        str=str.replace(&quot;L&quot;, &quot;-l&quot;);
        str=str.replace(&quot;M&quot;, &quot;-m&quot;);
        str=str.replace(&quot;N&quot;, &quot;-n&quot;);
        str=str.replace(&quot;O&quot;, &quot;-o&quot;);
        str=str.replace(&quot;P&quot;, &quot;-p&quot;);
        str=str.replace(&quot;Q&quot;, &quot;-q&quot;);
        str=str.replace(&quot;R&quot;, &quot;-r&quot;);
        str=str.replace(&quot;S&quot;, &quot;-s&quot;);
        str=str.replace(&quot;T&quot;, &quot;-t&quot;);
        str=str.replace(&quot;U&quot;, &quot;-u&quot;);
        str=str.replace(&quot;V&quot;, &quot;-v&quot;);
        str=str.replace(&quot;W&quot;, &quot;-w&quot;);
        str=str.replace(&quot;X&quot;, &quot;-x&quot;);
        str=str.replace(&quot;Y&quot;, &quot;-y&quot;);
        str=str.replace(&quot;Z&quot;, &quot;-z&quot;);
        return str;
    }
}</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com\apdplat\module\security\model\Position.java</td><td>62</td></tr><tr class="a"><td>com\apdplat\module\security\model\Role.java</td><td>81</td></tr><tr class="b"><td colspan='2'><div><pre>    protected List&lt;User&gt; users=new ArrayList&lt;&gt;();
    
    public String getModuleCommandStr(){
        if(this.commands==null || this.commands.isEmpty()){
            return &quot;&quot;;
        }
        StringBuilder ids=new StringBuilder();
        
        Set&lt;Integer&gt; moduleIds=new HashSet&lt;&gt;();
        
        for(Command command : this.commands){
            ids.append(&quot;command-&quot;).append(command.getId()).append(&quot;,&quot;);
            Module module=command.getModule();
            moduleIds.add(module.getId());
            module=module.getParentModule();
            while(module!=null){
                moduleIds.add(module.getId());
                module=module.getParentModule();
            }
        }
        for(Integer moduleId : moduleIds){
            ids.append(&quot;module-&quot;).append(moduleId).append(&quot;,&quot;);
        }
        ids=ids.deleteCharAt(ids.length()-1);
        return ids.toString();
    }
    /**
     * &#x83b7;&#x53d6;&#x6388;&#x4e88;&#x5c97;&#x4f4d;&#x7684;&#x6743;&#x5229;
     * @return
     */
    public List&lt;String&gt; getAuthorities() {
        List&lt;String&gt; result = new ArrayList&lt;&gt;();</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>com\apdplat\module\security\service\AbstractSequenceService.java</td><td>62</td></tr><tr class="a"><td>com\apdplat\module\security\service\AuthorizationUtils.java</td><td>24</td></tr><tr class="b"><td>com\apdplat\module\security\service\SecurityService.java</td><td>48</td></tr><tr class="a"><td colspan='2'><div><pre>    protected String getSplitString(String str, String split, int length){        
        int len=str.length();
        StringBuilder temp=new StringBuilder();
        for(int i=0;i&lt;len;i++){
            if(i%length==0 &amp;&amp; i&gt;0){
                temp.append(split);
            }
            temp.append(str.charAt(i));
        }
        String[] attrs=temp.toString().split(split);
        StringBuilder finalMachineCode=new StringBuilder();
        for(String attr : attrs){
            if(attr.length()==length){
                finalMachineCode.append(attr).append(split);
            }
        }
        String result=finalMachineCode.toString().substring(0, finalMachineCode.toString().length()-1);
        return result;
    }    </pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com\apdplat\module\monitor\service\MemoryStateChartDataService.java</td><td>47</td></tr><tr class="b"><td>com\apdplat\module\monitor\service\ProcessTimeChartDataService.java</td><td>141</td></tr><tr class="a"><td colspan='2'><div><pre>    }

    /**
     * &#x540c;&#x4e00;&#x547d;&#x4ee4;&#x53ea;&#x7559;&#x6700;&#x8017;&#x65f6;&#x7684;&#x547d;&#x4ee4;
     * @param models
     * @return 
     */
    private static List&lt;ProcessTime&gt; mini(List&lt;ProcessTime&gt; models) {
        LinkedHashMap&lt;String,ProcessTime&gt; LinkedHashMap=new LinkedHashMap&lt;&gt;();
        for(ProcessTime item : models){
            ProcessTime value=LinkedHashMap.get(item.getResource());
            if(value==null){
                value=item;
            }else{
                value=value.getProcessTime()&gt;item.getProcessTime()?value:item;
            }
            LinkedHashMap.put(item.getResource(), value);
        }
        List&lt;ProcessTime&gt; list=new ArrayList&lt;&gt;();
        for(ProcessTime item : LinkedHashMap.values()){
            list.add(item);
        }
        return list;
    }
}</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com\apdplat\module\security\model\Position.java</td><td>139</td></tr><tr class="b"><td>com\apdplat\module\security\model\Role.java</td><td>177</td></tr><tr class="a"><td colspan='2'><div><pre>    }

    public void setCommands(List&lt;Command&gt; commands) {
        this.commands = commands;
    }

    @XmlTransient
    public List&lt;Command&gt; getCommands() {
        return Collections.unmodifiableList(commands);
    }
  
    public void addCommands(Command command) {
        this.commands.add(command);
    }
  
    public void removeCommand(Command command) {
        this.commands.remove(command);
    }
    public void clearCommand() {
        commands.clear();
    }
    @XmlTransient
    public List&lt;User&gt; getUsers() {
        return Collections.unmodifiableList(users);
    }
    @Override
    public String getMetaData() {
        return &quot;&#x5c97;&#x4f4d;&quot;;</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com\apdplat\module\monitor\service\RuningTimeChartDataService.java</td><td>19</td></tr><tr class="b"><td>com\apdplat\module\monitor\service\RuningTimeChartDataService.java</td><td>50</td></tr><tr class="a"><td colspan='2'><div><pre>    public static LinkedHashMap&lt;String,Long&gt; getRuningSequence(List&lt;RuningTime&gt; models){
        LinkedHashMap&lt;String,Long&gt; data=new LinkedHashMap&lt;&gt;();
        if(models.size()&lt;1){
            return data;
        }
        Collections.sort(models, new Comparator(){

            @Override
            public int compare(Object o1, Object o2) {
                RuningTime p1=(RuningTime)o1;
                RuningTime p2=(RuningTime)o2;
                return (int) (p1.getStartupTime().getTime()-p2.getStartupTime().getTime());
            }
        
        });</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com\apdplat\module\security\action\PositionAction.java</td><td>104</td></tr><tr class="b"><td>com\apdplat\module\security\action\RoleAction.java</td><td>112</td></tr><tr class="a"><td colspan='2'><div><pre>        }
        public void setPrivileges(String privileges) {
            String[] ids=privileges.split(&quot;,&quot;);
            commands=new ArrayList&lt;&gt;();
            for(String id :ids){
                String[] attr=id.split(&quot;-&quot;);
                if(attr.length==2){
                    if(&quot;command&quot;.equals(attr[0])){
                        Command command=service.retrieve(Command.class, Integer.parseInt(attr[1]));
                        commands.add(command);
                    }
                }
            }        
        }

        public void setNode(String node) {</pre></div></td></tr></table><table border="0" class="bodyTable"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>com\apdplat\module\security\service\PositionService.java</td><td>101</td></tr><tr class="b"><td>com\apdplat\module\security\service\RoleService.java</td><td>97</td></tr><tr class="a"><td colspan='2'><div><pre>                .append(&quot;','id':'position-&quot;)
                .append(item.getId());
                if(item.getChild().isEmpty()){
                    json.append(&quot;','leaf':true,'cls':'file'&quot;);
                }else{
                    json.append(&quot;','leaf':false,'cls':'folder'&quot;);
                    if (recursion) {
                        json.append(&quot;,children:&quot;).append(toJson(item.getId(), recursion));
                    }
                }
           json .append(&quot;},&quot;);
        }
        //&#x5220;&#x9664;&#x6700;&#x540e;&#x4e00;&#x4e2a;,&#x53f7;&#xff0c;&#x6dfb;&#x52a0;&#x4e00;&#x4e2a;]&#x53f7;
        json=json.deleteCharAt(json.length()-1);
        json.append(&quot;]&quot;);

        return json.toString();
    }
    public Position getRootPosition(){</pre></div></td></tr></table></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2013.
          All Rights Reserved.      
            
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
